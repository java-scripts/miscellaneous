<html ng-app="myapp">
<head>
</style>
<script src="js/angular.min.js"></script>
</head>
<body ng-controller="mainController" style="background:grey;">	
	<svg width="100%" height="100%">
		<g ng-repeat="i in data" ng-attr-transform="translate(0,{{$index*w/2+100}})">
			<g ng-repeat="j in i track by $index" ng-attr-transform="translate({{$index*w}},0)">
			<rect ng-attr-width="{{w}}" ng-attr-height="{{w/2}}" ng-attr-fill="rgb({{j}},{{255-j}},{{255-j}})" ng-attr-transform="rotate({{Math.sqrt(j)*2}},{{-2*j}},0)" ></rect>
			</g>
		</g>	
	</svg>
<script>
(function(){
angular.module('myapp',[])
	.controller('mainController',function($scope,$timeout,$window){ 
		$scope.Math = window.Math;
		$scope.counter=0;$scope.m = 10;$scope.n = 20;                               
		$scope.h = parseInt($window.innerHeight/$scope.m);
		$scope.w = parseInt($window.innerWidth/$scope.n);
		$scope.data=[];
		for(var i=0;i<$scope.m;i++){
			$scope.data[i]=[];
		}                              
		$scope.render = function(){
			$scope.counter++;                                          
			for(var x=0;x<$scope.m;x++){
				for(var y=0;y<$scope.n;y++){
					r=radius(x-$scope.m/2,y-$scope.n/2);                                                                   
					v=Math.round(125+125*Math.sin(r-$scope.counter/2)/r);
					if(-Infinity == v){v=0;}else if(Infinity == v){v=255;}
					$scope.data[x][y] = v;
				}
			}
			$timeout($scope.render,50);
		};             
		$scope.render();                              
	});           
	function radius(x,y){
		return Math.sqrt(x*x+y*y)
	}
}());        
</script>
<script src="/js/ga.js"></script>
</body>
</html>
